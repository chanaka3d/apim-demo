(this["webpackJsonpelectricity-frontend"]=this["webpackJsonpelectricity-frontend"]||[]).push([[0],{352:function(e,t,n){},353:function(e,t,n){},375:function(e,t){},377:function(e,t){},388:function(e,t){},390:function(e,t){},417:function(e,t){},419:function(e,t){},420:function(e,t){},425:function(e,t){},427:function(e,t){},433:function(e,t){},435:function(e,t){},454:function(e,t){},466:function(e,t){},469:function(e,t){},472:function(e,t,n){},484:function(e,t,n){},489:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(26),r=n.n(o),i=(n(352),n(353),n(8)),l=n(112),s=n.n(l),d=n(313),u="https://dev.apim.com/oauth2/token",m="https://dev.apim.com/oauth2/authorize",j="code",O="openid profile roles email phone consumer_scope account_info_read user_mgt_read",b="https://fir-980df.web.app",h="q0ZI24bp0YwTPpxrlwlrnQprMq4a",p="3JjpOYMYS11tfMB2yx6ttsu7fusa",f="authorization_code",g="https://fir-980df.web.app",S="https://dev.apim.com/oidc/logout",_="https://dev.apim.com/accountrecoveryendpoint/register.do",x="carbon.super",E="https://dev.gw.apim.com/";new d.a;var v=n(66),T=n.n(v),I=function(){var e={};return e.ACCESS_TOKEN=localStorage.getItem("ACCESS_TOKEN"),e.REFRESH_TOKEN=localStorage.getItem("REFRESH_TOKEN"),e.SCOPE=localStorage.getItem("SCOPE"),e.ID_TOKEN=localStorage.getItem("ID_TOKEN"),e.TOKEN_TYPE=localStorage.getItem("TOKEN_TYPE"),e.EXPIRES_IN=localStorage.getItem("EXPIRES_IN"),e},C=function(e){return JSON.parse(atob(e.split(".")[1]))},R=function(){var e={};return e.id=localStorage.getItem("id"),e.username=localStorage.getItem("username"),e.firstName=localStorage.getItem("firstName"),e.lastName=localStorage.getItem("lastName"),e.email=localStorage.getItem("email"),e.mobile=localStorage.getItem("mobile"),e},P=(n(246),function(e){localStorage.getItem("code_verifier");var t=[];return t.push("client_id=".concat(h)),t.push("client_secret=".concat(p)),t.push("code=".concat(e)),t.push("grant_type=".concat(f)),t.push("redirect_uri=".concat(b)),s.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",s.a.post("".concat(u),t.join("&"),A()).then((function(e){return 200!==e.status?Promise.reject(new Error("Invalid status code received in the token response: "+e.status)):(t=e.data,localStorage.setItem("ACCESS_TOKEN",t.access_token),localStorage.setItem("REFRESH_TOKEN",t.refresh_token),localStorage.setItem("SCOPE",t.scope),localStorage.setItem("ID_TOKEN",t.id_token),localStorage.setItem("TOKEN_TYPE",t.token_type),localStorage.setItem("EXPIRES_IN",t.expires_in),[e.data,C(e.data.id_token)]);var t})).catch((function(e){return Promise.reject(e)}))}),A=function(){return{headers:{Accept:"application/json","Access-Control-Allow-Origin":"".concat(g),"Content-Type":"application/x-www-form-urlencoded"}}},N=function(){var e,t=(e="ID_TOKEN",localStorage.getItem(e));localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("SCOPE"),localStorage.removeItem("ID_TOKEN"),localStorage.removeItem("TOKEN_TYPE"),localStorage.removeItem("EXPIRES_IN"),localStorage.removeItem("id"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("email"),localStorage.removeItem("mobile"),localStorage.removeItem("userRole"),localStorage.removeItem("code_verifier"),window.location.href="".concat(S,"?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(b)},w=n(312),y=n(613),F=n(602),D=n(603),K=n(612),k=n(611),W=n(618),H=n(99),M=n(3),U=n(609),L=n(324),B=(n(472),n(1));var X=function(e){return Object(B.jsx)(k.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})},V=n(588),Y=n(608),z=n(227),$=n(616),J=n(606),q=n(610),G=n(504),Q=n(585),Z=n(100),ee=n(224),te=n(44),ne=n(79),ae=n.n(ne),ce=n(78),oe=n.n(ce),re=n(223),ie=n(605),le=n(584),se=s.a.create({baseURL:E});se.defaults.headers.common["Content-Type"]="application/json",se.defaults.headers.common["Access-Control-Allow-Origin"]="*",se.defaults.headers.common.Accept="*/*",se.defaults.headers.common["Accept-Encoding"]="gzip, deflate, br",se.interceptors.request.use((function(e){var t=I().ACCESS_TOKEN;return e.headers.Authorization=t?"Bearer ".concat(t):"",e}));var de=se,ue=[{field:"id",hide:!0},{field:"transactionId",headerName:"Transaction ID",width:250},{field:"createdBy",headerName:"Date",width:200,editable:!1},{field:"method",headerName:"Method",width:250,editable:!1},{field:"amount",headerName:"Amount",width:400,editable:!1}];var me=Object(re.a)(),je=Object(ie.a)((function(e){var t;return Object(le.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(M.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(M.a)(t,"margin",e.spacing(1,.5,1.5)),Object(M.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(M.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:me});function Oe(e){var t=je();return Object(B.jsxs)("div",{className:t.root,children:[Object(B.jsxs)("div",{children:[Object(B.jsx)(te.c,{}),Object(B.jsx)(te.b,{})]}),Object(B.jsx)(ee.a,{variant:"standard",value:e.value,onChange:e.onChange,placeholder:"Search\u2026",className:t.textField,InputProps:{startAdornment:Object(B.jsx)(oe.a,{fontSize:"small"}),endAdornment:Object(B.jsx)(Z.a,{title:"Clear","aria-label":"Clear",size:"small",style:{visibility:e.value?"visible":"hidden"},onClick:e.clearSearch,children:Object(B.jsx)(ae.a,{fontSize:"small"})})}})]})}function be(){var e,t=c.a.useState(""),n=Object(i.a)(t,2),o=n[0],r=n[1],l=c.a.useState(""),s=Object(i.a)(l,2),d=s[0],u=s[1],m=c.a.useState([]),j=Object(i.a)(m,2),O=j[0],b=j[1],h=c.a.useState([]),p=Object(i.a)(h,2),f=p[0],g=p[1],S=Object(a.useRef)(""),_=c.a.useState(),x=Object(i.a)(_,2),E=x[0],v=x[1],T=c.a.useState([]),I=Object(i.a)(T,2),C=I[0],P=I[1],A=function(e){u(e);var t=new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=O.filter((function(e){return Object.keys(e).some((function(n){return t.test(e[n].toString())}))}));g(n)};return Object(a.useEffect)((function(){var e=R();de.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/accounts",{params:{username:e.username}}).then((function(e){P(e.data)})).catch((function(e){alert(e)}))}),[]),Object(B.jsx)(c.a.Fragment,{children:Object(B.jsxs)(U.a,{container:!0,spacing:3,children:[Object(B.jsx)(U.a,{item:!0,xs:12,md:4,lg:3,children:Object(B.jsxs)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:[Object(B.jsx)(X,{children:"Account List"}),Object(B.jsx)("ul",{children:C.map((function(e,t){return Object(B.jsx)("li",{onClick:function(){return function(e){de.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_ACCOUNT_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/account",{params:{mobile_number:"",account_number:e.accountNumber}}).then((function(e){r(e.data)})).catch((function(e){alert(e)})),de.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/invoices",{params:{account_number:e.accountNumber,username:""}}).then((function(e){b(e.data),g(e.data)})).catch((function(e){alert(e)}))}(e)},children:e.accountNumber},t)}))})]})}),Object(B.jsx)(U.a,{item:!0,xs:12,md:4,lg:3,children:Object(B.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:Object(B.jsxs)(c.a.Fragment,{children:[Object(B.jsx)(X,{children:"Outstanding"}),Object(B.jsxs)(k.a,{component:"p",variant:"h4",children:["$",o.outstandAmount]}),Object(B.jsxs)(k.a,{color:"text.secondary",sx:{flex:1},children:["$",o.lastModifiedDate]})]})})}),Object(B.jsx)(U.a,{item:!0,xs:12,md:5,lg:4,children:Object(B.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:Object(B.jsxs)(c.a.Fragment,{children:[Object(B.jsxs)(Q.a,{children:["Selected Account : ",o.accountNumber," "]}),Object(B.jsx)(z.a,{htmlFor:"outlined-adornment-amount",children:"Amount"}),Object(B.jsx)(Y.a,{id:"outlined-adornment-amount",startAdornment:Object(B.jsx)($.a,{position:"start",children:"Rs"}),label:"Amount",inputRef:S}),Object(B.jsx)(Q.a,{component:"legend",children:"Payment Methods"}),Object(B.jsxs)(q.a,(e={name:"value",row:!0,"aria-label":"paymentMethods"},Object(M.a)(e,"name","row-radio-buttons-group"),Object(M.a)(e,"value",E),Object(M.a)(e,"onChange",(function(e,t){v(t)})),Object(M.a)(e,"children",[Object(B.jsx)(G.a,{value:"visa",control:Object(B.jsx)(J.a,{}),label:"Visa"}),Object(B.jsx)(G.a,{value:"master",control:Object(B.jsx)(J.a,{}),label:"Master"}),Object(B.jsx)(G.a,{value:"easyCash",control:Object(B.jsx)(J.a,{}),label:"easyCash"})]),e)),Object(B.jsx)(V.a,{direction:"row",spacing:2,children:Object(B.jsx)(H.a,{variant:"contained",onClick:function(){!function(e){if(e.payAmount)if(e.account)if(e.payMethod){var t=R(),n={id:"",transactionId:"",amount:e.payAmount,method:e.payMethod,invoiceAccounts:e.account,payee:{id:t.id,username:t.username,firstName:t.firstName,lastName:t.lastName,email:t.email,mobile:t.mobile}};de.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/payments",n).then((function(e){alert("payment success"),window.location.reload()})).catch((function(e){alert(e)}))}else alert("Select payment method");else alert("Select account number");else alert("Enter payment amount")}({payAmount:S.current.value,payMethod:E,account:o})},children:"Pay"})})]})})}),Object(B.jsx)(U.a,{item:!0,xs:12,children:Object(B.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(B.jsxs)(c.a.Fragment,{children:[Object(B.jsx)(X,{children:"Recent Payments"}),Object(B.jsx)("div",{style:{height:400,width:"100%"},children:Object(B.jsx)(te.a,{components:{Toolbar:Oe},rows:f,columns:ue,componentsProps:{toolbar:{value:d,onChange:function(e){return A(e.target.value)},clearSearch:function(){return A("")}}}})})]})})})]})})}var he=Object(re.a)();Object(ie.a)((function(e){var t;return Object(le.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(M.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(M.a)(t,"margin",e.spacing(1,.5,1.5)),Object(M.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(M.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:he});var pe=Object(re.a)();Object(ie.a)((function(e){var t;return Object(le.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(M.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(M.a)(t,"margin",e.spacing(1,.5,1.5)),Object(M.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(M.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:pe});n(25),n(82);n(594),n(604),n(593),n(614);var fe=Object(re.a)();Object(ie.a)((function(e){var t;return Object(le.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(M.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(M.a)(t,"margin",e.spacing(1,.5,1.5)),Object(M.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(M.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:fe});n(484);var ge=n(595),Se=n(592),_e=n(598),xe=n(601),Ee=n(600),ve=n(599),Te=n(617),Ie=n(177),Ce=n(597),Re=n(222),Pe=n.n(Re),Ae=n(173),Ne=n(596),we=Object(ge.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"},green:{color:e.palette.getContrastText(Ae.a[500]),backgroundColor:Ae.a[500]}}}));function ye(){var e=we(),t=Object(a.useState)(null),n=Object(i.a)(t,2),o=n[0],r=n[1];return Object(a.useEffect)((function(){de.get("/information/1.0.5/sheds",{params:{}}).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){alert(e)}))}),[]),o?Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Ce.a,{pb:2,children:Object(B.jsx)(Ie.a,{variant:"h3",children:"Train Schedule"})}),Object(B.jsx)(Se.a,{className:e.root,children:o.map((function(t){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(_e.a,{alignItems:"flex-start",children:[Object(B.jsxs)(ve.a,{children:[t.isActive?Object(B.jsx)(Te.a,{className:e.green,children:Object(B.jsx)(Pe.a,{})}):Object(B.jsx)(Te.a,{children:Object(B.jsx)(Pe.a,{})}),t.isActive?"Active":"In-active"]}),Object(B.jsx)(Ee.a,{primary:t.location,secondary:Object(B.jsx)(c.a.Fragment,{children:Object(B.jsx)(Ie.a,{component:"span",variant:"body2",className:e.inline,color:"textPrimary",children:" Commenced: ".concat(t.commenced)})})})]}),Object(B.jsx)(xe.a,{variant:"inset",component:"li"})]})}))})]}):Object(B.jsx)(Ne.a,{})}function Fe(){!function(){var e="".concat(m,"?response_type=").concat(j,"&scope=").concat(O,"&redirect_uri=").concat(b,"&client_id=").concat(h);window.location.href=e}()}function De(){!function(){var e=localStorage.getItem("username"),t="".concat(m,"?response_type=").concat(j,"&scope=").concat(O,"&redirect_uri=").concat(b,"&client_id=").concat(h,"&username=").concat(e);window.location.href=t}()}function Ke(){!function(){var e="".concat(_,"?&client_id=").concat(h,"&callback=").concat(b,"&tenantDomain=").concat(x);window.location.href=e}()}var ke=function(){var e=c.a.useState(!1),t=Object(i.a)(e,2),n=t[0],o=t[1],r=c.a.useState({}),l=Object(i.a)(r,2),s=(l[0],l[1]),d=c.a.useState({}),u=Object(i.a)(d,2),m=(u[0],u[1]);Object(a.useEffect)((function(){if(localStorage.getItem("ACCESS_TOKEN")){var e=I(),t={access_token:e.ACCESS_TOKEN,refresh_token:e.REFRESH_TOKEN,scope:e.SCOPE,id_token:e.ID_TOKEN,token_type:e.TOKEN_TYPE,expires_in:parseInt(e.EXPIRES_IN)};return m(t),s(C(e.ID_TOKEN)),void o(!0)}var n=new URL(window.location.href).searchParams.get("code");n&&P(n).then((function(e){console.log("TOKEN REQUEST SUCCESS",e),m(e[0]),s(e[1]),o(!0);e[1].sub})).catch((function(e){console.log("TOKEN REQUEST ERROR",e),o(!1)}))}),[]);var j=localStorage.getItem("userRole"),O=localStorage.getItem("username"),b=!1;return n&&(b=j===T.a.consumer),Object(B.jsxs)(w.a,{children:[Object(B.jsxs)(F.a,{sx:{display:"flex"},children:[Object(B.jsx)(D.a,{}),Object(B.jsx)(y.a,{position:"fixed",children:Object(B.jsxs)(K.a,{children:[Object(B.jsx)(k.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:"Consumer Dashboardxx"}),n?Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(H.a,{color:"inherit",onClick:function(){N()},children:"Logout"})}):Object(B.jsx)(B.Fragment,{})]})})]}),Object(B.jsx)(F.a,{component:"nav",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,width:{sm:240},height:"9vh",flexShrink:{sm:0},overflow:"auto"},"aria-label":"mailbox folders"}),Object(B.jsx)(F.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:Object(B.jsxs)(W.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:[Object(B.jsxs)(U.a,{container:!0,spacing:3,children:[Object(B.jsx)(U.a,{item:!0,xs:12,md:5,lg:4}),n?Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(ye,{})}):Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(U.a,{item:!0,xs:12,md:5,lg:4,children:Object(B.jsxs)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:[O&&Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(H.a,{color:"inherit",onClick:function(){De()},children:"Login With OTP"})}),Object(B.jsx)(H.a,{color:"inherit",onClick:function(){Fe()},children:"Login"}),Object(B.jsx)(H.a,{color:"inherit",onClick:function(){Ke()},children:"Register"})]})})}),Object(B.jsx)(U.a,{item:!0,xs:12,md:5,lg:4})]}),b?Object(B.jsx)(B.Fragment,{children:Object(B.jsx)(be,{})}):Object(B.jsx)(B.Fragment,{})]})})]})};var We=function(e){return Object(B.jsx)(ke,{})},He=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,621)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(We,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),He()},66:function(e,t){e.exports={consumer:"Consumer",meterReader:"MeterReader",finance:"FinancialAdvisor",admin:"Internal/admin"}}},[[489,1,2]]]);
//# sourceMappingURL=main.7c885970.chunk.js.map