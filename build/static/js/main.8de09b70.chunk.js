(this["webpackJsonpelectricity-frontend"]=this["webpackJsonpelectricity-frontend"]||[]).push([[0],{335:function(e,t,a){},336:function(e,t,a){},358:function(e,t){},360:function(e,t){},371:function(e,t){},373:function(e,t){},400:function(e,t){},402:function(e,t){},403:function(e,t){},408:function(e,t){},410:function(e,t){},416:function(e,t){},418:function(e,t){},437:function(e,t){},449:function(e,t){},452:function(e,t){},455:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(27),r=a.n(c),i=(a(335),a(336),a(8)),l=a(104),s=a.n(l),d=a(301),u="https://dev.apim.com/oauth2/token",m="https://dev.apim.com/oauth2/authorize",O="code",j="openid profile roles email phone consumer_scope account_info_read user_mgt_read",S="https://fir-980df.web.app",_="q0ZI24bp0YwTPpxrlwlrnQprMq4a",b="3JjpOYMYS11tfMB2yx6ttsu7fusa",h="authorization_code",p="https://fir-980df.web.app",E="https://dev.apim.com/oidc/logout",g="https://dev.apim.com/accountrecoveryendpoint/register.do",f="carbon.super";new d.a;var x=a(62),T=a.n(x),v=function(){var e={};return e.ACCESS_TOKEN=localStorage.getItem("ACCESS_TOKEN"),e.REFRESH_TOKEN=localStorage.getItem("REFRESH_TOKEN"),e.SCOPE=localStorage.getItem("SCOPE"),e.ID_TOKEN=localStorage.getItem("ID_TOKEN"),e.TOKEN_TYPE=localStorage.getItem("TOKEN_TYPE"),e.EXPIRES_IN=localStorage.getItem("EXPIRES_IN"),e},I=function(e){return JSON.parse(atob(e.split(".")[1]))},C=function(){var e={};return e.id=localStorage.getItem("id"),e.username=localStorage.getItem("username"),e.firstName=localStorage.getItem("firstName"),e.lastName=localStorage.getItem("lastName"),e.email=localStorage.getItem("email"),e.mobile=localStorage.getItem("mobile"),e},R=(a(232),function(e){localStorage.getItem("code_verifier");var t=[];return t.push("client_id=".concat(_)),t.push("client_secret=".concat(b)),t.push("code=".concat(e)),t.push("grant_type=".concat(h)),t.push("redirect_uri=".concat(S)),s.a.defaults.headers.post["Access-Control-Allow-Origin"]="*",s.a.post("".concat(u),t.join("&"),P()).then((function(e){return 200!==e.status?Promise.reject(new Error("Invalid status code received in the token response: "+e.status)):(t=e.data,localStorage.setItem("ACCESS_TOKEN",t.access_token),localStorage.setItem("REFRESH_TOKEN",t.refresh_token),localStorage.setItem("SCOPE",t.scope),localStorage.setItem("ID_TOKEN",t.id_token),localStorage.setItem("TOKEN_TYPE",t.token_type),localStorage.setItem("EXPIRES_IN",t.expires_in),[e.data,I(e.data.id_token)]);var t})).catch((function(e){return Promise.reject(e)}))}),P=function(){return{headers:{Accept:"application/json","Access-Control-Allow-Origin":"".concat(p),"Content-Type":"application/x-www-form-urlencoded"}}},A=function(){var e,t=(e="ID_TOKEN",localStorage.getItem(e));localStorage.removeItem("ACCESS_TOKEN"),localStorage.removeItem("REFRESH_TOKEN"),localStorage.removeItem("SCOPE"),localStorage.removeItem("ID_TOKEN"),localStorage.removeItem("TOKEN_TYPE"),localStorage.removeItem("EXPIRES_IN"),localStorage.removeItem("id"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("email"),localStorage.removeItem("mobile"),localStorage.removeItem("userRole"),localStorage.removeItem("code_verifier"),window.location.href="".concat(E,"?id_token_hint=").concat(t,"&post_logout_redirect_uri=").concat(S)},N=a(300),w=a(577),D=a(576),F=a(565),K=a(575),y=a(574),W=a(581),H=a(93),U=a(3),k=a(572),L=a(310),M=(a(455),a(1));var B=function(e){return Object(M.jsx)(y.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})},X=a(560),V=a(571),Y=a(213),z=a(580),$=a(568),J=a(573),q=a(481),G=a(557),Q=a(94),Z=a(210),ee=a(43),te=a(74),ae=a.n(te),ne=a(73),oe=a.n(ne),ce=a(298),re=a(567),ie=a(556),le=s.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL});le.defaults.headers.common["Content-Type"]="application/json",le.defaults.headers.common["Access-Control-Allow-Origin"]="*",le.interceptors.request.use((function(e){var t=v().ACCESS_TOKEN;return e.headers.Authorization=t?"Bearer ".concat(t):"",e}));var se=le,de=[{field:"id",hide:!0},{field:"transactionId",headerName:"Transaction ID",width:250},{field:"createdBy",headerName:"Date",width:200,editable:!1},{field:"method",headerName:"Method",width:250,editable:!1},{field:"amount",headerName:"Amount",width:400,editable:!1}];var ue=Object(ce.a)(),me=Object(re.a)((function(e){var t;return Object(ie.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(U.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(U.a)(t,"margin",e.spacing(1,.5,1.5)),Object(U.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(U.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:ue});function Oe(e){var t=me();return Object(M.jsxs)("div",{className:t.root,children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(ee.c,{}),Object(M.jsx)(ee.b,{})]}),Object(M.jsx)(Z.a,{variant:"standard",value:e.value,onChange:e.onChange,placeholder:"Search\u2026",className:t.textField,InputProps:{startAdornment:Object(M.jsx)(oe.a,{fontSize:"small"}),endAdornment:Object(M.jsx)(Q.a,{title:"Clear","aria-label":"Clear",size:"small",style:{visibility:e.value?"visible":"hidden"},onClick:e.clearSearch,children:Object(M.jsx)(ae.a,{fontSize:"small"})})}})]})}function je(){var e,t=o.a.useState(""),a=Object(i.a)(t,2),c=a[0],r=a[1],l=o.a.useState(""),s=Object(i.a)(l,2),d=s[0],u=s[1],m=o.a.useState([]),O=Object(i.a)(m,2),j=O[0],S=O[1],_=o.a.useState([]),b=Object(i.a)(_,2),h=b[0],p=b[1],E=Object(n.useRef)(""),g=o.a.useState(),f=Object(i.a)(g,2),x=f[0],T=f[1],v=o.a.useState([]),I=Object(i.a)(v,2),R=I[0],P=I[1],A=function(e){u(e);var t=new RegExp(e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),a=j.filter((function(e){return Object.keys(e).some((function(a){return t.test(e[a].toString())}))}));p(a)};return Object(n.useEffect)((function(){var e=C();se.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/accounts",{params:{username:e.username}}).then((function(e){P(e.data)})).catch((function(e){alert(e)}))}),[]),Object(M.jsx)(o.a.Fragment,{children:Object(M.jsxs)(k.a,{container:!0,spacing:3,children:[Object(M.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,children:Object(M.jsxs)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:[Object(M.jsx)(B,{children:"Account List"}),Object(M.jsx)("ul",{children:R.map((function(e,t){return Object(M.jsx)("li",{onClick:function(){return function(e){se.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_ACCOUNT_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/account",{params:{mobile_number:"",account_number:e.accountNumber}}).then((function(e){r(e.data)})).catch((function(e){alert(e)})),se.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/invoices",{params:{account_number:e.accountNumber,username:""}}).then((function(e){S(e.data),p(e.data)})).catch((function(e){alert(e)}))}(e)},children:e.accountNumber},t)}))})]})}),Object(M.jsx)(k.a,{item:!0,xs:12,md:4,lg:3,children:Object(M.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:Object(M.jsxs)(o.a.Fragment,{children:[Object(M.jsx)(B,{children:"Outstanding"}),Object(M.jsxs)(y.a,{component:"p",variant:"h4",children:["$",c.outstandAmount]}),Object(M.jsxs)(y.a,{color:"text.secondary",sx:{flex:1},children:["$",c.lastModifiedDate]})]})})}),Object(M.jsx)(k.a,{item:!0,xs:12,md:5,lg:4,children:Object(M.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:Object(M.jsxs)(o.a.Fragment,{children:[Object(M.jsxs)(G.a,{children:["Selected Account : ",c.accountNumber," "]}),Object(M.jsx)(Y.a,{htmlFor:"outlined-adornment-amount",children:"Amount"}),Object(M.jsx)(V.a,{id:"outlined-adornment-amount",startAdornment:Object(M.jsx)(z.a,{position:"start",children:"Rs"}),label:"Amount",inputRef:E}),Object(M.jsx)(G.a,{component:"legend",children:"Payment Methods"}),Object(M.jsxs)(J.a,(e={name:"value",row:!0,"aria-label":"paymentMethods"},Object(U.a)(e,"name","row-radio-buttons-group"),Object(U.a)(e,"value",x),Object(U.a)(e,"onChange",(function(e,t){T(t)})),Object(U.a)(e,"children",[Object(M.jsx)(q.a,{value:"visa",control:Object(M.jsx)($.a,{}),label:"Visa"}),Object(M.jsx)(q.a,{value:"master",control:Object(M.jsx)($.a,{}),label:"Master"}),Object(M.jsx)(q.a,{value:"easyCash",control:Object(M.jsx)($.a,{}),label:"easyCash"})]),e)),Object(M.jsx)(X.a,{direction:"row",spacing:2,children:Object(M.jsx)(H.a,{variant:"contained",onClick:function(){!function(e){if(e.payAmount)if(e.account)if(e.payMethod){var t=C(),a={id:"",transactionId:"",amount:e.payAmount,method:e.payMethod,invoiceAccounts:e.account,payee:{id:t.id,username:t.username,firstName:t.firstName,lastName:t.lastName,email:t.email,mobile:t.mobile}};se.post(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_CONSUMER_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/consumer/payments",a).then((function(e){alert("payment success"),window.location.reload()})).catch((function(e){alert(e)}))}else alert("Select payment method");else alert("Select account number");else alert("Enter payment amount")}({payAmount:E.current.value,payMethod:x,account:c})},children:"Pay"})})]})})}),Object(M.jsx)(k.a,{item:!0,xs:12,children:Object(M.jsx)(L.a,{sx:{p:2,display:"flex",flexDirection:"column"},children:Object(M.jsxs)(o.a.Fragment,{children:[Object(M.jsx)(B,{children:"Recent Payments"}),Object(M.jsx)("div",{style:{height:400,width:"100%"},children:Object(M.jsx)(ee.a,{components:{Toolbar:Oe},rows:h,columns:de,componentsProps:{toolbar:{value:d,onChange:function(e){return A(e.target.value)},clearSearch:function(){return A("")}}}})})]})})})]})})}var Se=Object(ce.a)();Object(re.a)((function(e){var t;return Object(ie.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(U.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(U.a)(t,"margin",e.spacing(1,.5,1.5)),Object(U.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(U.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:Se});var _e=Object(ce.a)();Object(re.a)((function(e){var t;return Object(ie.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(U.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(U.a)(t,"margin",e.spacing(1,.5,1.5)),Object(U.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(U.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:_e});a(25),a(76);a(564),a(566),a(570),a(578);var be=Object(ce.a)();Object(re.a)((function(e){var t;return Object(ie.a)({root:{padding:e.spacing(.5,.5,0),justifyContent:"space-between",display:"flex",alignItems:"flex-start",flexWrap:"wrap"},textField:(t={},Object(U.a)(t,e.breakpoints.down("xs"),{width:"100%"}),Object(U.a)(t,"margin",e.spacing(1,.5,1.5)),Object(U.a)(t,"& .MuiSvgIcon-root",{marginRight:e.spacing(.5)}),Object(U.a)(t,"& .MuiInput-underline:before",{borderBottom:"1px solid ".concat(e.palette.divider)}),t)})}),{defaultTheme:be});a(467);function he(){!function(){var e="".concat(m,"?response_type=").concat(O,"&scope=").concat(j,"&redirect_uri=").concat(S,"&client_id=").concat(_);window.location.href=e}()}function pe(){!function(){var e=localStorage.getItem("username"),t="".concat(m,"?response_type=").concat(O,"&scope=").concat(j,"&redirect_uri=").concat(S,"&client_id=").concat(_,"&username=").concat(e);window.location.href=t}()}function Ee(){!function(){var e="".concat(g,"?&client_id=").concat(_,"&callback=").concat(S,"&tenantDomain=").concat(f);window.location.href=e}()}var ge=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),a=t[0],c=t[1],r=o.a.useState({}),l=Object(i.a)(r,2),s=(l[0],l[1]),d=o.a.useState({}),u=Object(i.a)(d,2),m=(u[0],u[1]);Object(n.useEffect)((function(){if(localStorage.getItem("ACCESS_TOKEN")){var e=v(),t={access_token:e.ACCESS_TOKEN,refresh_token:e.REFRESH_TOKEN,scope:e.SCOPE,id_token:e.ID_TOKEN,token_type:e.TOKEN_TYPE,expires_in:parseInt(e.EXPIRES_IN)};return m(t),s(I(e.ID_TOKEN)),void c(!0)}var a=new URL(window.location.href).searchParams.get("code");a&&R(a).then((function(e){console.log("TOKEN REQUEST SUCCESS",e),m(e[0]),s(e[1]),c(!0);var t={id:"",username:e[1].sub};se.get(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APIM_USERS_PREFIX+Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PREFIX+"/users",{params:{username:t.username}}).then((function(e){var t;localStorage.setItem("username",e.data.username),t=e.data,localStorage.setItem("id",t.id),localStorage.setItem("username",t.username),localStorage.setItem("firstName",t.firstName),localStorage.setItem("lastName",t.lastName),localStorage.setItem("email",t.email),localStorage.setItem("mobile",t.mobile),window.location.replace("/")})).catch((function(e){console.log(e)}))})).catch((function(e){console.log("TOKEN REQUEST ERROR",e),c(!1)}))}),[]);var O=localStorage.getItem("userRole"),j=localStorage.getItem("username"),S=!1;return a&&(S=O===T.a.consumer),Object(M.jsxs)(N.a,{children:[Object(M.jsxs)(D.a,{sx:{display:"flex"},children:[Object(M.jsx)(F.a,{}),Object(M.jsx)(w.a,{position:"fixed",children:Object(M.jsxs)(K.a,{children:[Object(M.jsx)(y.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,sx:{flexGrow:1},children:"Consumer Dashboard"}),a?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(H.a,{color:"inherit",onClick:function(){A()},children:"Logout"})}):Object(M.jsx)(M.Fragment,{})]})})]}),Object(M.jsx)(D.a,{component:"nav",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,width:{sm:240},height:"9vh",flexShrink:{sm:0},overflow:"auto"},"aria-label":"mailbox folders"}),Object(M.jsx)(D.a,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto"},children:Object(M.jsxs)(W.a,{maxWidth:"lg",sx:{mt:4,mb:4},children:[Object(M.jsxs)(k.a,{container:!0,spacing:3,children:[Object(M.jsx)(k.a,{item:!0,xs:12,md:5,lg:4}),a?Object(M.jsx)(M.Fragment,{}):Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(k.a,{item:!0,xs:12,md:5,lg:4,children:Object(M.jsxs)(L.a,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:[j&&Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(H.a,{color:"inherit",onClick:function(){pe()},children:"Login With OTP"})}),Object(M.jsx)(H.a,{color:"inherit",onClick:function(){he()},children:"Login"}),Object(M.jsx)(H.a,{color:"inherit",onClick:function(){Ee()},children:"Register"})]})})}),Object(M.jsx)(k.a,{item:!0,xs:12,md:5,lg:4})]}),S?Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(je,{})}):Object(M.jsx)(M.Fragment,{})]})})]})};var fe=function(e){return Object(M.jsx)(ge,{})},xe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,584)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),o(e),c(e),r(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(M.jsx)(o.a.StrictMode,{children:Object(M.jsx)(fe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})),xe()},62:function(e,t){e.exports={consumer:"Consumer",meterReader:"MeterReader",finance:"FinancialAdvisor",admin:"Internal/admin"}}},[[468,1,2]]]);
//# sourceMappingURL=main.8de09b70.chunk.js.map